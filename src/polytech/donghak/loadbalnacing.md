# 로드밸런싱

## 로드 밸런싱

- 아무리 성능이 뛰어난 서버라고 해도 단 한대의 서버로는 모든 트래픽을 감당해내기 어려움
- 이에 기업들은 서버를 추가로 구비하고 여러 대의 서버에 동일한 데이터를 저장해 수많은 트래픽을 효과적으로 분산하여 처리

- 그런데 단순히 다수의 서버를 구축해 운영한다고 해서 모든 클라이언트의 요청에 일관성 있게 응답할 수 없음
- 쏟아지는 트래픽을 여러 대의 서버로 분산시켜주는 기술이 없다면 한 곳의 서버에 모든 트래픽이 몰리는 상황이 발생

→ 이때 필요한 기술이 바로 **로드 밸런싱**이다.

![Untitled](%E1%84%85%E1%85%A9%E1%84%83%E1%85%B3%E1%84%87%E1%85%A2%E1%86%AF%E1%84%85%E1%85%A5%E1%86%AB%E1%84%89%E1%85%B5%E1%86%BC%20f6dbf324ac1f4cac920d03f68173b4c5/Untitled.png)

## 로드 밸런싱이란?

- 로드 밸런싱이란 말 그대로 서버가 처리해야 할 업무 혹은 요청(Load)을 여러 대의 서버로 나누어(Balancing) 처리하는 것을 의미
- 한 대의 서버로 부하가 집중되지 않도록 트래픽을 관리해 각각의 서버가 최적의 퍼포먼스를 보일 수 있도록 하는 것이 목적

## 2가지 방식

- 서비스의 규모가 커지고, 이용자 수가 늘어나게 되면 기존의 서버만으로는 원활한 서비스 동작이 불가능하게 되고, 이에 대처할 수 있는 방법은 크게 두 가지로 나뉜다.
    - 기존의 서버 성능을 확장하는 Scale-up 방식
    - 기존의 서버와 동일하거나 낮은 성능의 서버를 증설하는 Scale-out 방식

# **로드 밸런싱 기법(알고리즘)**

로드 밸런싱 기법은 여러 가지 존재.
서버의 능력을 고려하여 분배해야 하기 때문에 서버의 상황에 맞춰 적절한 방법을 선택

- **라운드로빈 방식(Round Robin Method)**
    
    서버에 **들어온 요청을 순서대로 돌아가며 배정하는 방식**이다. 클라이언트의 요청을 순서대로 분배하기 때문에 **여러 대의 서버가 동일한 스펙**을 갖고 있고, **서버와의 연결(세션)이 오래 지속되지 않는 경우에 활용하기 적합**하다.
    

- **가중 라운드로빈 방식(Weighted Round Robin Method)**
    
    각각의 서버마다 가중치를 매기고 **가중치가 높은 서버에 클라이언트 요청을 우선적으로 배분**한다. 주로 서버의 **트래픽 처리 능력이 상이한 경우 사용되는 부하 분산 방식**이다.
    예를 들어 A라는 서버가 5라는 가중치를 갖고 B라는 서버가 2라는 가중치를 갖는다면, 로드 밸런서는 라운드로빈 방식으로 A 서버에 5개 B 서버에 2개의 요청을 전달한다.
    
- **IP 해시 방식(IP Hash Method)**
    
    **클라이언트의 IP 주소를 특정 서버로 매핑하여 요청을 처리하는 방식**이다. **사용자의 IP를 해싱**해(Hashing, 임의의 길이를 지닌 데이터를 고정된 길이의 데이터로 매핑하는 것, 또는 그러한 함수) 로드를 분배하기 때문에 **사용자가 항상 동일한 서버로 연결되는 것을 보장**한다.
    
- **최소 연결 방식(Least Connection Method)**
    
    요청이 들어온 시점에 **가장 적은 연결상태를 보이는 서버에 우선적으로 트래픽을 배분**한다. **자주 세션이 길어지거나, 서버에 분배된 트래픽들이 일정하지 않은 경우에 적합한 방식**이다.
    
- **최소 응답 시간 방식(Least Response Time Method)**
    
    **서버의 현재 연결 상태와 응답 시간**(Response Time, 서버에 요청을 보내고 최초 응답을 받을 때까지 소요되는 시간)을 **모두 고려하여 트래픽을 배분**한다. **가장 적은 연결 상태와 가장 짧은 응답 시간을 보이는 서버에 우선적으로 로드를 배분하는 방식**이다.
    

---

## **로드 밸런싱의 이점은 무엇인가요?**

- 로드 밸런싱은 애플리케이션 서버와 방문자 또는 클라이언트 간의 인터넷 트래픽을 지시하고 제어
- 결과적으로 애플리케이션의 **가용성, 확장성, 보안 및 성능이 향상**됩니다.

### 애플리케이션 가용성

서버 장애 또는 유지 관리로 인해 애플리케이션 가동 중지 시간이 늘어 방문자가 애플리케이션을 사용할 수 없게 될 수 있습니다. 로드 밸런서는 서버 문제를 자동으로 감지하고 클라이언트 트래픽을 사용 가능한 서버로 리디렉션하여 시스템의 내결함성을 높입니다. 로드 밸런싱을 사용하여 다음 태스크를 더 쉽게 수행할 수 있습니다.

- 애플리케이션 가동 중지 없이 애플리케이션 서버 유지 관리 또는 업그레이드 실행
- 백업 사이트에 자동 재해 복구 제공
- 상태 확인을 수행하고 가동 중지를 유발할 수 있는 문제 방지

### 애플리케이션 확장성

로드 밸런서를 사용하여 여러 서버 간에 네트워크 트래픽을 지능적으로 전달할 수 있습니다. 로드 밸런싱이 다음을 수행하므로 애플리케이션에서 수천 개의 클라이언트 요청을 처리할 수 있습니다.

- 한 서버에서 트래픽 병목 현상 방지
- 필요한 경우 다른 서버를 추가하거나 제거할 수 있도록 애플리케이션 트래픽을 예측합니다.
- 안심하고 조정할 수 있도록 시스템에 중복성을 추가합니다.

### 애플리케이션 보안

로드 밸런서에는 인터넷 애플리케이션에 또 다른 보안 계층을 추가할 수 있는 보안 기능이 내장되어 있습니다. 이는 공격자가 서버 장애를 일으키는 수백만 개의 동시 요청으로 애플리케이션 서버를 가득 채우는 분산 서비스 거부 공격을 처리하는 데 유용한 도구입니다. 로드 밸런서는 다음을 수행할 수도 있습니다.

- 트래픽 모니터링 및 악성 콘텐츠 차단
- 공격 트래픽을 여러 백엔드 서버로 자동으로 리디렉션하여 영향 최소화
- 추가 보안을 위해 네트워크 방화벽 그룹을 통해 트래픽 라우팅

### 애플리케이션 성능

로드 밸런서는 응답 시간을 늘리고 네트워크 지연 시간을 줄여 애플리케이션 성능을 향상시킵니다. 다음과 같은 몇 가지 중요한 태스크를 수행합니다.

- 서버 간에 로드를 균등하게 배포하여 애플리케이션 성능 향상
- 클라이언트 요청을 지리적으로 더 가까운 서버로 리디렉션하여 지연 시간 단축
- 물리적 및 가상 컴퓨팅 리소스의 신뢰성 및 성능 보장