- 옛날 전자 상거래 페이지가 있는 웹사이트에서만 HTTPS 를 사용 했었음
- 2014년 구글에서 HTTPS를 사용하는 웹사이트에 대해 검색 순위 결과에 약간의 가산점을 주겠다고 하며 HTTP - HTTPS로 바꾸라 권고
- 2019년 구글은 크롬 68을 릴리즈하며 7월부터 SSL 보안 서버가 적용된 HTTPS 웹페이지는 안전함으로 표시, 그렇지 않은 HTTP사이트에 대해서는 안전하지 않음으로 경고 표시를 적용할 것이라고 발표

<img src ="https://post-phinf.pstatic.net/MjAxODA4MjNfMTgw/MDAxNTM1MDAzNzM3ODA2.eNAvF1GYYuE7Pk1bg9crj6GRNCvAAihiyzswr-UC8Isg.OqptAj0NBsBGz2MpA7f2Vg94yS6QZCrKIzQ70wfaWCgg.PNG/screenshot_006.png?type=w1200">
- 그렇다면 HTTPS가 무엇일까?

---

## HTTP

- HTTP란 HyperText Transfer Protocol의 약자
- 하이퍼텍스트를 전송하기 위해 사용되는 통신 규약
- 인터넷에서 HTML과 같은 문서를 사용자 컴퓨터에 설치된 웹 브라우저가 웹 서버에 요청했을 때의 규칙
- HTTP 서버는 기본 포트인 80번 포트에서 서비스 대기, 클라이언트(웹브라우저)가 TCP 80번 포트를 사용해 연결하면 서버는 요청에 응답하면서 자료를 전송
- HTTP는 텍스트를 정보로 주고받기 때문에 네트워크에서 전송 신호를 인터셉트 하는 경우 원하지 않은 데이터 유출이 발생할 수 있음
- 이러한 보안 취약점을 해결하기 위한 프로토콜이 HTTP에 S(Secure Socket)가 추가된 HTTPS

## HTTPS

<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F9989B1505C72885E29">

<img src= "http://blog.wishket.com/wp-content/uploads/2020/02/03-3.png">

- 기본 골격이나 사용 목적 등은 HTTP와 거의 동일
- 데이터를 주고 받는 과정에 ‘보안’요소가 추가되었음
- **HTTPS를 사용하면 서버와 클라이언트 사이의 모든 통신 내용이 암호화**
- HTTPS는 페이지를 암호화한 키가 그 페이지를 보는 특정 사용자에게만 알려지도록 함
- SSL이나 TSL 프로토콜을 통해 세션 데이터를 암호화
- 기본 TCP/IP 포트는 443이고 SSL 프로토콜 위에서 HTTPS 프로토콜이 동작
* Transport Layer Security의 줄임말, 과거 SSL에서 발전하며 이름이 변경된 것, 하지만 아직도 SSL 명칭이 많이 사용

## 암호화 방식

- 공개키 암호화 방식과 공개키의 단점(느림)을 보완한 대칭키 암호화 방식을 함께 사용
- 공개키 방식으로 대칭키를 전달, 서로 공유된 대칭키를 가지고 통신

### 공개키 방식

- A키로 암호화하면 B키로 복호화
- B키로 암호화 하면 A 키로 복호화
- 둘 중 하나를 비공개키 (Private Key)/개인키라 부르며 자신만 가지고 있고 공개하지 않음
- 나머지 하나를 공개키 (Public Key)라고 부르며 타인에게 제공
- 공개키는 유출이 되어도 비공개키를 모르면 복호화할 수없기 때문에 안전
    
    <img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=http%3A%2F%2Fcfile21.uf.tistory.com%2Fimage%2F9943623359FF02B1056ED8">
    

### 대칭키 방식

- 동일한 키로 암호화, 복호화가 가능
- 대칭키는 매번 랜덤으로 생성되어 누출되어도 다음에 사용시 다른 키가 사용되기 때문에 안전
- 공개키보다 빠르게 통신
1. 이러한 SSL 방식을 적용하려면 인증서를 발급받아 서버에 적용시켜야 함
2. 인증서를 발급받는 기관을 CA (Certificate Authority)라고 함
3. 공인인증 기관의 경우 웹 브라우저는 미리 CA 리스트와 함께 각 CA의 공개키를 알고 있음
*CA : 공개키와 공개 DNS(www.example.com)의 연결을 보장하는 기관

## 동작 과정

- 서버 = 사이트
- 클라이언트 = 사용자
    
    <img src="https://t1.daumcdn.net/cfile/tistory/99F0FA445C456BB809">
    
1. 인터넷 사이트(서버)는 공개키와 개인키를 만들고, 신뢰할 수 있는 인증 기관(CA)에 자신의 정보와 공개키를 관리해달라고 계약하고 (경우에 따라) 돈을 지불한다.
2. 이 때, 계약을 완료한 인증 기관은 기관만의 공개키와 개인키가 있다. 인증 기관은 사이트가 제출된 데이터를 검증하고, 인증 기관의 개인키로 사이트에서 제출한 정보를 암호화해서 인증서를 만들어 제공한다. 사이트는 인증서를 가지게 되었다.
3. 인증 기관은 웹 브라우저에게 자신의 공개키를 제공한다.
    
    <img src="https://t1.daumcdn.net/cfile/tistory/993364345C457AED30">
    
    1. 사용자가 사이트에 접속하면 서버는 자신의 인증서를 웹 브라우저(클라이언트)에게 보낸다. 예를 들어, 웹 브라우저가 index.html 파일을 달라고 요청했다면, 서버의 정보를 인증 기관의 개인키로 암호화한 인증서를 받게 되는 것이다.
    2. 웹 브라우저는 3.에서 미리 알고 있던 인증기관의 공개키로 인증서를 해독하여 검증한다. 그러면 사이트의 정보와 서버의 공개키를 알 수 있게 된다.*이 부분은 보안상의 의미는 없다. 단지 해당 서버로부터 온 응답임을 확신할 수 있게 된다.*
    3. 이렇게 얻은 서버의 공개키로 대칭키를 암호화해서 다시 사이트에 보낸다.
    4. 사이트는 개인키로 암호문을 해독하여 대칭키를 얻게 되고, 이제 대칭키로 데이터를 주고받을 수 있게 된다.
        
        <img src="https://t1.daumcdn.net/cfile/tistory/9997354E5C457AF229">
        
    
    ## HTTPS의 장단점
    
    - 웹 사이트의 무결성을 보호
    - 침입자가 웹사이트와 사용자 사이의 통신을 몰래 수신하는 것을 방지함으로써 보안을 강화시켜줌
    - 사진촬영이나 오디오 녹음, 플랫폼 신기능들은 실행하려면 사용자의 명시적인 권한 허락을 필요로 한다, HTTPS는 이러한 새 기능과 업데이트 된 AP에 대한 권한 허락을 가능하게 함
    - 모든 사이트에서 텍스트를 암호화해서 주고 받으면 과부하가 걸려 속도가 느려질 수 있음. 중요한 사이트는 HTTPS로 관리, 그렇지 않으면 HTTP를 사용