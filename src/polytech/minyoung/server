---
layout : home 
---

# 원격지 시스템 관리하기

원격접속은 간단히 말하면 멀리 있는 장소의 pc(운영체제는 아무거나 상관없다)에서 내 리눅스 서버에 접속하는 것이다. 그렇게 한다면 내가 직접 서버 앞에 앉아서 작업하는 것과 완전히 동일한 효과를 가질 수 있다.

쉽게 생각해보면 케이블이 달린 모니터, 키보드, 마우스가 있다고 가정해보았을 때, 케이블의 길이가 10미터, 100미터가 아닌 케이블의 길이가 무한대라면 아무리 먼 곳에서라도 작업할 수 있다. 결과적으로 원격 접속은 이러한 무한대의 길이를 가진 케이블이라 생각해도 무방하다. 원격접속은 케이블 대신에 네트워크(또는 인터넷)망을 사용하는 것뿐이다. 

## 1. 텔넷 서버

텔넷은 오랫동안 전통적으로 사용되어 온 원격 접속 방법이지만 오래돼서 보안 등에 취약하여 요즘은 사용하지 않는 추세이다. 그래도 가장 기본적인 것이므로 알아 두어야 한다.

### 1.1. 텔넷 서버 개요

리눅스 서버에 텔넷 서버를 설치했다면, 원격지에서 리눅스 서버에 접속할 pc에는 텔넷 클라이언트 프로그램이 필요하다. 운영체제 대부분은 기본적으로 텔넷 클라이언트 프로그램이 내장되어 있으므로 따로 설치하지 않아도 된다.

- 여기서 잠깐 
서버/ 클라이언트는 아주 흔한 용어지만, 처음 서버를 구축하는 사람들은 개념이 완전하지 않을 수 있으므로 짚고 넘어가야 한다. 
ex)  많은 사람들이 네이버(www.aver.com) 가를 사용하는데 이것 역시 서버/클라이언트 개념이다.
네이버라는 웹 서버(리눅스 웹 서버라고 가정한다면)가 작동하고 있고, 사람들은 웹 브라우저(주로 인터넷 익스플로러, 크롬, 사파리, 파이어폭스 등)라는 웹 클라이언트 프로그램을 이용해서 웹 서버에 접속하는 것이기 때문이다. 즉 서버 프로그램이 작동할 때, 서버를 사용하려면 클라이언트 프로그램 필요.

텔넷 서버도 마찬가지이다. 털넷 서버 프로그램이 작동할 때, 텔넷 서버에 접속하려면 텔넷 클라이언트 프로그램이 있어야만 한다. 다른 서버 프로그램도 대부분 각각의 클라이언트 프로그램이 있어야만 서버에 접속해서 사용할 수 있는 것과 같다. 

서버 클라이언트의 특징은 다음과 같다.
    - 서버에 접속하러면 꼭 클라이언트 프로그램이 필요하다.
    - 서버가 리눅스라고 클라이언트도 리눅스일 필요는 없다. 즉 서버의 os 와 클라이언트의 os 가 같아야 하는 것은 아니다.
    - 각각의 서버 프로그램은 자신에게 맞는 별도의 클라이언트 프로그램이 필요하다.
        - 웹서버(아파치 또는 IIS) ↔ 웹 클라이언트(인터넷 익스플로러, 크롬, 사파리, 파이어폭스, 모질라 등)
        - 텔넷 서버 ↔ 텔넷 클라이언트(telnet, 한글 putty 등)
        - FTP 서버 ↔ FTP 클라이언트(알 FTP, ws FTP, ftp, gtp 등)
        - VNC 서버 ↔ VNC 클라이언트(vncviewer, TightVNC 등)
        - SSHD 서버 ↔ SSHD 클라이언트 (ssh, 한글 Putty 등)
        - 오라클 서버 ↔ 오라클 클라이언트 (sqlplus)
        

### 1.2. 텔넷 서버 구축

텔넷 서버 구축 과정 요약

1. 텔넷 서버 설치 : apt-get install xinetd telnetd
2. 설정 파일 편집 : /etc/xinetd.d/telnet 파일 편집 
3. 텔넷 전용 사용자 생성 : adduser 사용자명
4. 텔넷 서비스 가동 : systemctl restart xinetd
5. 방화벽 설정(포트 열기) : ufw allow 23/tcp
6. 클라이언트에서 접속 : telnet 서버 ip

- 여기서 잠깐
포트(port)란 TCP 포트 또는 UDP 포트를 줄여서 부르는 것인데, 가상의 논리적인 통신 연결 번호를 말한다. 컴퓨터를 건물이라고 가정하면 ip 주소는 건물의 정문이고, 포트 번호는 건물 안의 각 방의 방 번호라고 생각하면 된다. 예를 들어 회의실은 55번 방, 휴게실은 77번 방, 식당은 33번 방이라는 것처럼 번호를 매긴 것을 생각하면 이해하기 쉽다.
모든 컴퓨터는 0 ~ 65535까지 포트 번호가 있다. 그런데 일반적으로 0 ~ 1023 까지는 예약된 포트 번호가 많다. 지금 구축한 텔넷 서버는 23번, FTP 서버는 21번, 웹 서버는 80번 등으로 예약이 되어 있다.

## 2. OpenSSH 서버

OpenSSH 서버는 텔넷과 용도는 동일하지만, 보안이 강화된 서버이다. 텔넷은 오래 전부터 사용되어 왔으나, 요즘 들어서는 문제가 있다. 서버와 클라이언트 사이에 데이터를 전송할 때 암호화를 하지 않아 해킹 위험에 노출되어 있는 것이다. 실제 텔넷으로 접속한 컴퓨터가 전송하는 데이터의 값을 알아내는 것은 별로 어려운 일이 아니다. 예를 들어 Windows 에서 리눅스로 접속할 때 사용하는 아이디와 비밀번호가 네트워크상에 그대로 전송되는 일이다. 

이를 해결하기 위해서 사용하는 것이 OpenSSH 서버다. 데이터 전송 시 패킷 암호화 한다는 과정이 추가된다.

- OpenSSH 서버의 구축 과정
1. ssh 서버 설치/ 가동 : apt-get install, openssh-server, systemctl restart ssh
2. 방화벽 설정 : ufw allow 22/tcp
→ 1) 리눅스 클라이언트에서 접속 : ssh 사용자명 @서버 ip
→ 2) 윈도우 클라이언트에서 접속  → 한글 putty 설치 : SSH 클라이언트 사용  

## 3. VNC 서버

ssh 서버까지 설치하니, 출장지에서 해킹의 걱정 없이 작업할 수 있어서 안심이 되기는 하지만, 아무래도 X 윈도 환경에서 작업할 일이 생길 것 같은데 이러한 문제를 어떻게 해결할지에 대해 고민을 하게 됨.

실제로 텔넷 서버 및 ssh 서버를 설치하고 나면 모든 작업을 할 수 있지만, x 윈도 환경을 지원하지 않으므로 x 윈도 전용 명령을 사용할 수가 없다. 꼭 테스트 모드에서 사용 가능한 명령만 써야한다. 오래 전부터 리눅스를 사용해온 관리자라면 아무런 불편이 없겠지만, 최근 추세에 따라 x 윈도 환경에서 사용되는 유틸리티나 명령이 많으므로 이제는 x 윈도 환경 자체를 원격지에서 사용할 수도 있어야한다. 

vnc 서버는 그래픽 모드로 원격 관리를 지원한다. vnc 서버는 지금 얘기한 것처럼 원격지에서 x 윈도 환경 자체를 사용할 수 있게하는 서버 프로그램이다. 텔넷과 개념이 거의 동일하지만, 텔넷은 전통적으로 오랫동안 사용해 왔으므로 대부분의 운영체제에 텔넷 클라이언트 프로그램이 있지만, vnc의 경우에는 별도의 클라이언트 프로그램을 설치해야한다.

또한 vnc의 경우에는 원격지로 그래픽 화면을 전송하는 원리이므로, 텍스트만 전송하는 텔넷과 비교했을 때 속도가 많이 느려지는 단점이 있다. 텔넷과 거의 동일하지만 서버에 앉아서 x 윈도를 사용하는 것과 완전히 동일한 효과를 낼 수 있다.

- vnc 서버 설치 과정
1. vnc 서버 설치 : apt-get install vnc4server
2. 서버 설정 파일 수정 : xstartup 파일
3. vnc 서비스 가동 : vncserver : 1
4. 방화벽 설정 : ufw allow 5901/tcp
5. vnc 클라이언트 설치 : 
1) 리눅스: apt-get install xtightvncviewer, 
2) windows : [www.tigervnc.com](http://www.tigervnc.com)에서 다운로드
6. vnc 클라이언트 실행 
1) 리눅스 : vncviewer <ip>:<번호>
2) windows : TIgerVNC Viewer 실행
7. 해상도 조절 : options의 color level

지금까지 구축한 3가지 서버를 비교하면 다음과 같다.




각각의 장단점이 있지만,  아무래도 속도와 보안 강화 측면에서 ssh를 기본적으로 사용할 수 있게 설정하고 vnc 서버는 설정만 해 놓고 가동하지 않으면 된다.

원격지에서 ssh 서버로 접속해서 관리하다가 x 윈도 환경 접속이 필요한 경우에는 ssh 접속창에서 vnc 서버를 구동시켜주고 vnc 클라이언트로 접속하면 된다. 실제로 리눅스 서버 관리를 오래하다 보면 x 윈도 환경이 있어야 하는 경우가 그렇게 많지는 않다. 텔넷 서버의 경우에는 보안이 완전한 회사 안의 네트워크에서만 사용하기에 무난 할 것 이다.