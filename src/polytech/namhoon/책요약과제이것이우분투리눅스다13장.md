---
layout : home
---

# 이것이 우분투 리눅스다 13장. FTP 서버 설치, 운영 

## 1. FTP?

1. File Transfer Protocol : 파일을 전송하는데 사용하는 전용 서비스 
2.  [TCP](https://namu.wiki/w/TCP)/[IP](https://namu.wiki/w/IP) 네트워크 상에서 컴퓨터들이 주로 대량의 파일을 교환할때 사용
3. 일반적으로 21번 포트를 기본 통신모드로 사용 



## 2. 13장 요

### 1. vsftpd 설치와 운영

vsftpd : 우분투에서 기본으로 제공되는 FTP 서버

1. 설치 

   1. apt-get -y install vsftpd로 설치

   2. 익명 사용자(anonymous)의 접속을 허용
      -> /etc/vsftpd.conf 파일에서 아래와 같이 설정(앞의 #을 제거)

      - 25행쯤 anonymous_enable = yes 

      //익명 ftp 서비스 활성화 여부 설정

      - 31행쯤 write_enable = yes 

      //쓰기 가능 여부 설정

      - 40행쯤 anon_upload_enable = yes 

        //익명 FTP 접속자의 파일 업로드 권한 설정

      - 44행쯤 anon_mkdir_write_enable = yes 

        //익명FTP 접속자의 디렉토리 생성 권한 설정
        
        

[자주 쓰는 설정]

![](http://idchowto.com/wp-content/uploads/2017/01/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7-2017-01-25-17-14-11.png)

3. vsftpd에 anonymous(익명)로 접속되는 디렉터리는 /srv/ftp -> 이 디렉터리 아래에 pub 디렉터리를 만들고 모든 사용자에게 읽기/쓰기 권한 주자.

   `cd /srv/ftp`

   `mkdir pub`

   `chmod 777 pub -> 디렉터리 허가권 변경`

   `cd pub`

   `cp /boot/vm* file1 -> 샘플 파일 복사`

   `ls -l` 

4. 재시작 : systemctl restart vsftpd, systemctl enable vsftpd, systemctl status vsftpd

5. 포트 허용 : ufw allow ftp

   

### 2. Filezilla 설치해서 서버에 업로드 해보자.

1. filezilla를 설치 후, 


[호스트]에는 server의 IP 주소, [사용자]에는 anonymous(익명사용자), [비밀번호]는 아무거나 입력 후,

빠른 연결 버튼을 클릭한다.

![](https://swiftcoding.org/wp-content/uploads/downloading-a-file-in-filezilla.png)

2. 드래그 앤 드랍으로 자유롭게 옮겨보자



### 3. 텍스트 모드에서 FTP 접속을 테스트해보자.

1. 설치 : apt-get -y install lftp

2. 다음 명령어를 입력해 FTP 서버에 접속한 후, /pub 디렉터리에 파일을 업로드하고 다운로드하자.

   cp /boot/vm* file2

   lftp 192.168.56.100   <- ftp 서버에 접속

   lftp > ls <- 파일과 폴더 확인

   lftp > cd pub

   lftp > ls -l

   lftp > put file2 <- 파일 업로드(UTIME 오류가 나와도 무시한다)
   lftp > ls -l

   lftp > get file1 <- 파일 다운로드

   lftp > bye <- ftp 클라이언트 종료

   ls -l



### 4. ProFTPD 설치 와 운영 

- ProFTPD는 주로 대형 사이트에서 오랫동안 인기가 많았던 ftp 서버
- vsftpd와 용도는 완전히 동일하지만 설정 방법이 약간 다르다.



1. 설치 : apt-get -y install proftpd -> 설치 중 ProFTPD configuration 메시지가 나오면 'standalone' 선택

   cf. 설치 방법에 from inetd와 standalone이 있는데 뭔 차이야?

   from inetd : 슈퍼 데몬 
   -평소에 inetd가 작동하고 있다가 필요할 때마다 ftp 데몬을 호출

   -평소에는 ftp 데몬이 작동하지 않기 때문에 컴퓨터의 자원을 아끼는 효과 but 반응속도가 조금 느림

   standalone : ftp 데몬이 독립적으로 작동하는 방식
   -평소에도 늘 ftp 서비스가 메모리에 상주

   -자원의 낭비는 조금 있으나, 즉각 반응

   **--> **일반적으로 ftp 서비스가 주요한 목적이라면 standlone을 / ftp 서비스를 부가적인 용도로 쓰면**
         inetd 방식 사용이 좋다!**



2. proftpd의 설정 파일을 변경하자 : /etc/proftpd/proftpd.conf

   vi /etc/proftpd/proftpd.conf

   

   1. 147행쯤 <Anonymous ~ftp> 부터 186행 쯤</Anonymous>까지 제일 첫 열의 주석을 모두 제거
   2.  174행쯤<Directory incoming> 부터 184행쯤</Directory>까지 각 행 앞의 주석을 제거
   3. 169행쯤 DenyAll -> AllowAll
   4. 179행쯤 DenyAll -> AllowAll



[자주 사용하는 옵션] (책보다 자세히 설명해줌)

https://www.linux.co.kr/bbs/board.php?bo_table=lecture&wr_id=199&sst=wr_datetime&sod=asc&sop=and&page=11



3. 서비스 시작/ 상시가동
   -systemctl restart proftpd
   -systemctl enable proftpd



4. ufw allow ftp : 21번 포트 허용 
